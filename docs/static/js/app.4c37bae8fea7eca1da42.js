webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tile",class:this.getTileClass()},[e("div",{staticClass:"tile-inner"},[this._v(this._s(this.tile.value))])])},staticRenderFns:[]},r=i("VU/8")({name:"Tile",props:["tile","x","y"],data:function(){return{}},methods:{getTileClass:function(){return"tile-"+this.tile.value+" tile-position-"+(this.x+1)+"-"+(this.y+1)}}},s,!1,null,null,null).exports,a=new n.a,o=i("pFYg"),l=i.n(o),u=i("Zrlr"),h=i.n(u),c=i("wxAW"),v=i.n(c),f=function(){function t(e){h()(this,t),this.value=e}return v()(t,[{key:"increment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.value+=t}},{key:"erase",value:function(){this.value=0}}]),t}(),d=function(){function t(e,i,n){h()(this,t),this.tiles=e,this.yDim=i,this.xDim=n,this.addTile()}return v()(t,[{key:"isFull",value:function(){for(var t=!1,e=0;e<this.yDim;e++)for(var i=0;i<this.xDim;i++)0===this.tiles[e][i].value&&(t=!0);return t}},{key:"addTile",value:function(){for(var t=!1;!0!==t;){var e=this.alea(this.xDim),i=this.alea(this.yDim);if(0===this.tiles[i][e].value){var n=Math.random()<.9?2:4;this.tiles[i][e].increment(n),t=!0}}}},{key:"canMove",value:function(){if(!0!==this.isFull)return!0}},{key:"getLine",value:function(t){for(var e=Array(this.xDim),i=0;i<this.xDim;i++)e[i]=this.tiles[t][i];return e}},{key:"setLine",value:function(t,e){this.tiles[t]=e}},{key:"initList",value:function(t){for(var e=0;e<this.xDim;e++)"object"!==l()(t[e])&&(t[e]=new f(0))}},{key:"mergeLine",value:function(t){var e=Array();console.log(t);for(var i=0;i<this.xDim;i++){var n=t[i].value;i<this.xDim-1&&0!==t[i].value&&t[i].value===t[i+1].value&&(n*=2,i++),e.push(new f(n))}return 0==e.length?t:(this.initList(e),e)}},{key:"moveLine",value:function(t){for(var e=Array(),i=0;i<this.yDim;i++)0!==t[i].value&&e.push(t[i]);if(0===e.length)return t;for(var n=Array(this.yDim),s=0;s<this.yDim;s++){var r=e[s];"object"===(void 0===r?"undefined":l()(r))?n[s]=r:n[s]=new f(0)}return n}},{key:"compare",value:function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i].value!=e[i].value)return!1;return!0}},{key:"left",value:function(){for(var t=!1,e=0;e<this.yDim;e++){var i=this.getLine(e),n=this.mergeLine(this.moveLine(i));this.setLine(e,n),!0!==t&&!0!==this.compare(i,n)&&(t=!0)}!0===t&&this.addTile()}},{key:"right",value:function(){this.tiles=this.rotate(180),this.left(),this.tiles=this.rotate(180)}},{key:"down",value:function(){this.tiles=this.rotate(270),this.left(),this.tiles=this.rotate(90)}},{key:"up",value:function(){this.tiles=this.rotate(90),this.left(),this.tiles=this.rotate(270)}},{key:"alea",value:function(t){return Math.floor(t*Math.random()*1)}},{key:"rotate",value:function(e){var i=t.initTiles(4,4);console.log(i),console.log(this.tiles);var n=3,s=3;90==e?s=0:270==e&&(n=0),Math.radians=function(t){return t*Math.PI/180};for(var r=Math.radians(e),a=Math.cos(r),o=Math.sin(r),l=0;l<4;l++)for(var u=0;u<4;u++){var h=Math.round(l*a-u*o)+n,c=Math.round(l*o+u*a)+s;i[h][c]=this.tiles[l][u]}return i}}],[{key:"initTiles",value:function(t,e){for(var i=Array(t),n=0;n<t;n++){i[n]=Array(e);for(var s=0;s<e;s++)i[n][s]=new f(0)}return i}},{key:"init",value:function(e,i){var n=t.initTiles(e,i);return console.log(n),new t(n,e,i)}}]),t}(),m={name:"Grid",props:["xDim","yDim"],components:{tile:r},data:function(){return{grid:[]}},created:function(){this.createGrid(),a.$on("move",this.move)},beforeDestroy:function(){a.$off("move",this.move)},methods:{createGrid:function(){this.grid=d.init(this.yDim,this.xDim)},move:function(t){if(!0!==this.grid.canMove())alert("Perdu !");else{switch(t){case this.$UP:this.grid.up();break;case this.$DOWN:this.grid.down();break;case this.$RIGHT:this.grid.right();break;case this.$LEFT:this.grid.left()}this.$forceUpdate()}}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("div",{staticClass:"app-notice"}),t._v(" "),i("div",{staticClass:"grid-container"},t._l(t.grid.tiles,function(e){return i("div",{staticClass:"grid-row"},t._l(e,function(t){return i("div",{staticClass:"grid-cell"})}))})),t._v(" "),i("div",{staticClass:"tile-container"},t._l(t.grid.tiles,function(e,n){return i("div",t._l(e,function(e,s){return e.value>0?i("tile",{attrs:{tile:e,x:s,y:n}}):t._e()}))}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"above-game"},[e("p",{staticClass:"game-intro"},[this._v("Join the numbers and get to the "),e("strong",[this._v("2048 tile!")])]),this._v(" "),e("a",{staticClass:"restart-button"},[this._v("New Game")])])}]};var g={name:"GameWidget",components:{grid:i("VU/8")(m,y,!1,function(t){i("VII2")},"data-v-6f1d199d",null).exports},data:function(){return{x:null,y:null,started:!1}},created:function(){this.start(),this.assignKeys()},beforeDestroy:function(){this.eraseKeys()},methods:{start:function(){this.x=4,this.y=4,this.started=!0},bindKeys:function(t){var e=this;switch(t.keyCode){case e.$DOWN:e.Down();break;case e.$RIGHT:e.Right();break;case e.$UP:e.Up();break;case e.$LEFT:e.Left()}},assignKeys:function(){window.addEventListener("keydown",this.bindKeys)},eraseKeys:function(){window.removeEventListener("keydown",this.bindKeys)},Up:function(){a.$emit("move",this.$UP)},Down:function(){a.$emit("move",this.$DOWN)},Right:function(){a.$emit("move",this.$RIGHT)},Left:function(){a.$emit("move",this.$LEFT)}}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"heading"},[e("h1",{staticClass:"title"},[this._v("2048")]),this._v(" "),e("div",{staticClass:"scores-container"}),this._v(" "),this.started?e("grid",{attrs:{xDim:this.x,yDim:this.y}}):this._e()],1)},staticRenderFns:[]},k=i("VU/8")(g,p,!1,null,null,null).exports;n.a.prototype.$UP=38,n.a.prototype.$DOWN=40,n.a.prototype.$RIGHT=39,n.a.prototype.$LEFT=37,n.a.config.productionTip=!1,n.a.component("game",k),new n.a({el:"#app"})},VII2:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4c37bae8fea7eca1da42.js.map