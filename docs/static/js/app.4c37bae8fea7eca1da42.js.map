{"version":3,"sources":["webpack:///./src/components/TileWidget.vue?310c","webpack:///./src/components/TileWidget.vue","webpack:///src/components/TileWidget.vue","webpack:///./src/event-bus.js","webpack:///./src/models/tile.js","webpack:///./src/models/grid.js","webpack:///src/components/GridWidget.vue","webpack:///./src/components/GridWidget.vue?ba33","webpack:///./src/components/GridWidget.vue","webpack:///src/components/GameWidget.vue","webpack:///./src/components/GameWidget.vue?c276","webpack:///./src/components/GameWidget.vue","webpack:///./src/main.js"],"names":["components_TileWidget","render","_h","this","$createElement","_c","_self","staticClass","class","getTileClass","_v","_s","tile","value","staticRenderFns","src_components_TileWidget","__webpack_require__","normalizeComponent","name","props","data","methods","x","y","EventBus","vue_esm","Tile","classCallCheck_default","val","arguments","length","undefined","Grid","tiles","yDim","xDim","addTile","result","generateTile","xAlea","alea","yAlea","Math","random","increment","isFull","index","line","Array","i","typeof_default","models_tile","list","console","log","num","push","initList","l","newLine","j","line1","line2","needAddTile","getLine","merged","mergeLine","moveLine","setLine","compare","rotate","left","N","floor","angle","newTiles","initTiles","offsetX","offsetY","radians","degrees","PI","rad","cos","sin","newX","round","newY","GridWidget","components","grid","created","createGrid","$on","move","beforeDestroy","$off","init","direction","canMove","alert","$UP","up","$DOWN","down","$RIGHT","right","$LEFT","$forceUpdate","components_GridWidget","_vm","_m","_l","yTile","xTile","indexY","indexX","attrs","_e","GameWidget","GridWidget_normalizeComponent","ssrContext","started","start","assignKeys","eraseKeys","bindKeys","e","vm","keyCode","Down","Right","Up","Left","window","addEventListener","removeEventListener","$emit","components_GameWidget","src_components_GameWidget","GameWidget_normalizeComponent","prototype","config","productionTip","component","el"],"mappings":"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","file":"static/js/app.4c37bae8fea7eca1da42.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tile\",class:_vm.getTileClass()},[_c('div',{staticClass:\"tile-inner\"},[_vm._v(_vm._s(_vm.tile.value))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-36d2e6a4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TileWidget.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TileWidget.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TileWidget.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36d2e6a4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TileWidget.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TileWidget.vue\n// module id = null\n// module chunks = ","<template>\r\n<div class=\"tile\" :class=\"getTileClass()\">\r\n    <div class=\"tile-inner\">{{ tile.value }}</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Tile',\r\n  props: ['tile', 'x', 'y'],\r\n  data () {\r\n    return {\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    getTileClass() {\r\n      return 'tile-' + this.tile.value + ' tile-position-' + (this.x + 1) + '-' + (this.y + 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/TileWidget.vue","import Vue from 'vue';\r\n/* eslint-disable no-new */\r\nexport const EventBus = new Vue()\n\n\n// WEBPACK FOOTER //\n// ./src/event-bus.js","export default class Tile  {\r\n    constructor (value) {\r\n        this.value = value\r\n    }\r\n\r\n    increment (val = 2) {\r\n        this.value += val\r\n    }\r\n\r\n    erase () {\r\n        this.value = 0\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/tile.js","import Tile from \"./tile\";\r\n\r\nexport default class Grid  {\r\n    constructor (tiles, yDim, xDim) {\r\n        this.tiles = tiles\r\n        this.yDim = yDim\r\n        this.xDim = xDim\r\n        this.addTile()\r\n    }\r\n\r\n    static initTiles(yDim, xDim) {\r\n        var tiles = Array(yDim)\r\n        for (var y = 0; y < yDim; y++) {\r\n            tiles[y] = Array(xDim)\r\n            for (var x = 0; x < xDim; x++) {\r\n                tiles[y][x] = new Tile(0)\r\n            }\r\n        }\r\n\r\n        return tiles\r\n    }\r\n\r\n    static init (yDim, xDim) {\r\n        var tiles = Grid.initTiles(yDim, xDim)\r\n        console.log(tiles)\r\n        return new Grid(tiles, yDim, xDim)\r\n    }\r\n\r\n    isFull () {\r\n        var result = false\r\n        for (var y = 0; y < this.yDim; y++) {\r\n            for (var x = 0; x < this.xDim; x++) {\r\n                if (this.tiles[y][x].value === 0) {\r\n                    result = true\r\n                }\r\n            }\r\n        }\r\n\r\n        return result\r\n    }\r\n\r\n    addTile () {\r\n      var generateTile = false\r\n      while (generateTile !== true) {\r\n        var xAlea = this.alea(this.xDim)\r\n        var yAlea = this.alea(this.yDim)\r\n        if (this.tiles[yAlea][xAlea].value === 0) {\r\n            var val = Math.random() < 0.9 ? 2 : 4\r\n          this.tiles[yAlea][xAlea].increment(val)\r\n          generateTile = true\r\n        }\r\n      } \r\n    }\r\n\r\n    canMove () {\r\n        if (this.isFull !== true) {\r\n            return true\r\n        }\r\n    }\r\n\r\n    getLine (index) {\r\n        var line = Array(this.xDim)\r\n        for (var x = 0; x < this.xDim; x++) {\r\n            line[x] = this.tiles[index][x]\r\n        }\r\n        return line\r\n    }\r\n\r\n    setLine (index, line) {\r\n        this.tiles[index] = line\r\n    }\r\n\r\n    initList (line) {\r\n        for (var i = 0; i < this.xDim; i++) {\r\n            if ( typeof line[i] !== 'object') {\r\n                line[i] = new Tile(0)\r\n            }\r\n        }\r\n    }\r\n\r\n    mergeLine (line) {\r\n        var list = Array()\r\n        console.log(line)\r\n        for (var i = 0; i < this.xDim; i++) {\r\n            var num = line[i].value\r\n            if (i < this.xDim - 1 && line[i].value !== 0 && line[i].value === line[i + 1].value) {\r\n                num *= 2\r\n                i++\r\n            }\r\n            list.push(new Tile(num))\r\n        }\r\n        if (list.length == 0) {\r\n            return line\r\n        } else {\r\n            this.initList(list)\r\n            return list\r\n        }\r\n        \r\n    }\r\n\r\n    moveLine (line) {\r\n        var l = Array()\r\n        for (var i = 0; i < this.yDim; i++) {\r\n            if (line[i].value !== 0) {\r\n                l.push(line[i])\r\n            }\r\n        }\r\n        if (l.length === 0) {\r\n            return line\r\n        } else {\r\n            var newLine = Array(this.yDim)\r\n            for (var j = 0; j < this.yDim; j++) {\r\n                var tile = l[j]\r\n                if (typeof tile === 'object') {\r\n                    newLine[j]  = tile\r\n                } else {\r\n                    newLine[j] = new Tile(0)\r\n                }\r\n            }\r\n\r\n            return newLine\r\n        }\r\n    }\r\n\r\n    compare (line1, line2) {\r\n        if (line1 == line2) {\r\n            return true;\r\n          } else if (line1.length != line2.length) {\r\n            return false;\r\n          }\r\n      \r\n          for (var i = 0; i < line1.length; i++) {\r\n            if (line1[i].value != line2[i].value) {\r\n              return false;\r\n            }\r\n          }\r\n          return true;\r\n    }\r\n\r\n    left () {\r\n        var needAddTile = false\r\n        for (var y = 0; y < this.yDim; y++) {\r\n            var res = 0\r\n            var line = this.getLine(y)\r\n            var merged = this.mergeLine(this.moveLine(line))\r\n            this.setLine(y, merged)\r\n            if (needAddTile !== true && this.compare(line, merged) !== true) {\r\n                needAddTile = true\r\n            }\r\n        }\r\n        if (needAddTile === true) {\r\n            this.addTile()\r\n        }\r\n    }\r\n\r\n    right () {\r\n        this.tiles = this.rotate(180)\r\n        this.left()\r\n        this.tiles = this.rotate(180)\r\n    }\r\n\r\n    down() {\r\n        this.tiles = this.rotate(270);\r\n        this.left();\r\n        this.tiles = this.rotate(90);\r\n      }\r\n    \r\n    up() {\r\n        this.tiles = this.rotate(90);\r\n        this.left();\r\n        this.tiles = this.rotate(270);\r\n      }\r\n\r\n    alea (N) {\r\n        return (Math.floor((N * Math.random() * 1)))\r\n    }\r\n\r\n    rotate(angle) {\r\n        var newTiles = Grid.initTiles(4, 4)\r\n        console.log(newTiles)\r\n        console.log(this.tiles)\r\n        var offsetX = 3 \r\n        var offsetY = 3\r\n        if (angle == 90) {\r\n          offsetY = 0\r\n        } else if (angle == 270) {\r\n          offsetX = 0\r\n        }\r\n\r\n        Math.radians = function(degrees) {\r\n            return degrees * Math.PI / 180;\r\n          }\r\n    \r\n        var rad = Math.radians(angle)\r\n        var cos = Math.cos(rad)\r\n        var sin = Math.sin(rad)\r\n        for (var x = 0; x < 4; x++) {\r\n          for (var y = 0; y < 4; y++) {\r\n            var newX = Math.round((x * cos) - (y * sin)) + offsetX\r\n            var newY = Math.round((x * sin) + (y * cos)) + offsetY\r\n            newTiles[newX][newY] = this.tiles[x][y]\r\n          }\r\n        }\r\n        return newTiles\r\n      }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/grid.js","<template>\r\n<div>\r\n    <div class=\"above-game\">\r\n      <p class=\"game-intro\">Join the numbers and get to the <strong>2048 tile!</strong></p>\r\n      <a class=\"restart-button\">New Game</a>\r\n    </div>\r\n    <div class=\"app-notice\">\r\n    </div>\r\n    <div class=\"grid-container\">\r\n       <div v-for=\"yTile in grid.tiles\" class=\"grid-row\">\r\n            <div class=\"grid-cell\" v-for=\"xTile in yTile\"></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"tile-container\">\r\n       <div v-for=\"yTile, indexY in grid.tiles\">\r\n            <tile v-for=\"xTile, indexX in yTile\" v-if=\"xTile.value > 0\" :tile=\"xTile\" :x=\"indexX\" :y=\"indexY\"></tile>\r\n        </div>\r\n    </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport Tile from './TileWidget'\r\nimport { EventBus } from './../event-bus'\r\nimport Grid from './../models/grid'\r\n\r\nexport default {\r\n  name: 'Grid',\r\n  props: ['xDim', 'yDim'],\r\n  components: {'tile': Tile},\r\n  data () {\r\n    return {\r\n      grid: []\r\n    }\r\n  },\r\n  created () {\r\n    this.createGrid()\r\n    EventBus.$on('move', this.move)\r\n  },\r\n  beforeDestroy () {\r\n    EventBus.$off('move', this.move)\r\n  },\r\n  methods: {\r\n    createGrid () {\r\n      this.grid = Grid.init(this.yDim, this.xDim)\r\n    },\r\n    move (direction) {\r\n       if (this.grid.canMove() !== true) {\r\n        alert('Perdu !')\r\n      } else {\r\n        switch (direction) {\r\n          case this.$UP:\r\n            this.grid.up()\r\n            break\r\n          case this.$DOWN: \r\n            this.grid.down()\r\n            break\r\n          case this.$RIGHT: \r\n            this.grid.right()\r\n            break\r\n          case this.$LEFT: \r\n            this.grid.left()\r\n            break\r\n        }\r\n        this.$forceUpdate()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.line {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/GridWidget.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"app-notice\"}),_vm._v(\" \"),_c('div',{staticClass:\"grid-container\"},_vm._l((_vm.grid.tiles),function(yTile){return _c('div',{staticClass:\"grid-row\"},_vm._l((yTile),function(xTile){return _c('div',{staticClass:\"grid-cell\"})}))})),_vm._v(\" \"),_c('div',{staticClass:\"tile-container\"},_vm._l((_vm.grid.tiles),function(yTile,indexY){return _c('div',_vm._l((yTile),function(xTile,indexX){return (xTile.value > 0)?_c('tile',{attrs:{\"tile\":xTile,\"x\":indexX,\"y\":indexY}}):_vm._e()}))}))])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"above-game\"},[_c('p',{staticClass:\"game-intro\"},[_vm._v(\"Join the numbers and get to the \"),_c('strong',[_vm._v(\"2048 tile!\")])]),_vm._v(\" \"),_c('a',{staticClass:\"restart-button\"},[_vm._v(\"New Game\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6f1d199d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GridWidget.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6f1d199d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GridWidget.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GridWidget.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GridWidget.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6f1d199d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GridWidget.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6f1d199d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GridWidget.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"heading\">\r\n      <h1 class=\"title\">2048</h1>\r\n      <div class=\"scores-container\"></div>\r\n      <grid v-if=\"started\" :xDim=\"x\" :yDim=\"y\"></grid>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GridWidget from './GridWidget'\r\nimport { EventBus } from './../event-bus.js'\r\n\r\nexport default {\r\n  name: 'GameWidget',\r\n  components: {'grid': GridWidget},\r\n  data () {\r\n     return {\r\n         x: null,\r\n         y: null,\r\n         started: false\r\n     } \r\n  },\r\n  created () {\r\n      this.start()\r\n      this.assignKeys()\r\n  },\r\n  beforeDestroy () {\r\n      this.eraseKeys()\r\n  },\r\n  methods: {\r\n      start () {\r\n          this.x = 4\r\n          this.y = 4\r\n          this.started = true\r\n      },\r\n      bindKeys (e) {\r\n           var vm = this;\r\n          switch (e.keyCode) {\r\n                case vm.$DOWN:\r\n                    vm.Down()\r\n                    break\r\n                case vm.$RIGHT:\r\n                    vm.Right()\r\n                    break\r\n                case vm.$UP:\r\n                    vm.Up()\r\n                    break\r\n                case vm.$LEFT:\r\n                    vm.Left()\r\n                    break\r\n            }\r\n      },\r\n      assignKeys () {\r\n        window.addEventListener('keydown', this.bindKeys)\r\n      },\r\n      eraseKeys () {\r\n        window.removeEventListener('keydown', this.bindKeys)\r\n      },\r\n      Up () {\r\n          EventBus.$emit('move', this.$UP)\r\n      },\r\n      Down () {\r\n          EventBus.$emit('move', this.$DOWN)\r\n      },\r\n      Right () {\r\n          EventBus.$emit('move', this.$RIGHT)\r\n      },\r\n      Left () {\r\n          EventBus.$emit('move', this.$LEFT)\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/GameWidget.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"heading\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"2048\")]),_vm._v(\" \"),_c('div',{staticClass:\"scores-container\"}),_vm._v(\" \"),(_vm.started)?_c('grid',{attrs:{\"xDim\":_vm.x,\"yDim\":_vm.y}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e8bcc96a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GameWidget.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameWidget.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameWidget.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e8bcc96a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GameWidget.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GameWidget.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport Game from './components/GameWidget'\n\nVue.prototype.$UP = 38\nVue.prototype.$DOWN = 40\nVue.prototype.$RIGHT = 39\nVue.prototype.$LEFT = 37\n\nVue.config.productionTip = false\n\nVue.component('game', Game)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}